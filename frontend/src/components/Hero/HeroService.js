"use client";
import Image from "next/image";
import { useState, useEffect } from "react";

export default function ServicesSection() {
  const [isMobile, setIsMobile] = useState(false);
  const [openIndex, setOpenIndex] = useState(null);

const services = [ { title: "Rooftop Solar Solutions", description: "A rooftop solar project installs panels on your home’s roof to generate electricity for daily use, with surplus power sent back to the grid via net metering.", image: "https://res.cloudinary.com/dimfwawfk/image/upload/v1761832461/cdcd906cdb863777f1c5e0a471d53361db3ea777_kxujau.jpg", icon: <svg width="52" height="52" viewBox="0 0 52 52" fill="none" xmlns="http://www.w3.org/2000/svg"> <circle cx="26" cy="26" r="26" fill="#8EC643"/> <path d="M42.7569 25.4966L37.1319 14.2466C37.0383 14.0597 36.8946 13.9025 36.7168 13.7927C36.5389 13.6829 36.334 13.6249 36.125 13.625H15.875C15.666 13.6249 15.4611 13.6829 15.2832 13.7927C15.1054 13.9025 14.9617 14.0597 14.8681 14.2466L9.24313 25.4966C9.16558 25.6531 9.12516 25.8253 9.125 26V33.875C9.125 34.4717 9.36205 35.044 9.78401 35.466C10.206 35.8879 10.7783 36.125 11.375 36.125H40.625C41.2217 36.125 41.794 35.8879 42.216 35.466C42.6379 35.044 42.875 34.4717 42.875 33.875V26C42.8748 25.8253 42.8344 25.6531 42.7569 25.4966ZM21.9303 15.875L23.6178 19.25H19.3822L17.6947 15.875H21.9303ZM28.6803 15.875L30.3678 19.25H26.1322L24.4447 15.875H28.6803ZM22.1947 24.875L20.5072 21.5H24.7428L26.4303 24.875H22.1947ZM28.9447 24.875L27.2572 21.5H31.4928L33.1803 24.875H28.9447ZM35.6947 24.875L34.0072 21.5H38.2428L39.9303 24.875H35.6947ZM37.1178 19.25H32.8822L31.1947 15.875H35.4303L37.1178 19.25ZM11.375 26.2658L15.875 17.2658L20.375 26.2658V33.875H11.375V26.2658ZM22.625 33.875V27.125H40.625V33.875H22.625Z" fill="#166066"/> </svg> , }, { title: "Ground Mounted Solar", description: "Ground-mounted solar systems maximize open space to deliver scalable, reliable clean energy for industries and communities.", image: "/HeroInstallation3.jpg", icon: <svg width="53" height="53" viewBox="0 0 53 53" fill="none" xmlns="http://www.w3.org/2000/svg"> <circle cx="26.5" cy="26.5" r="26.5" fill="#8EC643"/> <path d="M13.4994 23.625C13.4994 23.3266 13.6179 23.0405 13.8289 22.8295C14.0399 22.6185 14.3261 22.5 14.6244 22.5H16.8744C17.1728 22.5 17.4589 22.6185 17.6699 22.8295C17.8809 23.0405 17.9994 23.3266 17.9994 23.625C17.9994 23.9234 17.8809 24.2095 17.6699 24.4205C17.4589 24.6315 17.1728 24.75 16.8744 24.75H14.6244C14.3261 24.75 14.0399 24.6315 13.8289 24.4205C13.6179 24.2095 13.4994 23.9234 13.4994 23.625ZM19.0443 17.2617C19.2554 17.4728 19.5417 17.5914 19.8402 17.5914C20.1387 17.5914 20.425 17.4728 20.6361 17.2617C20.8472 17.0506 20.9658 16.7643 20.9658 16.4658C20.9658 16.1672 20.8472 15.8809 20.6361 15.6698L19.0443 14.0794C18.8316 13.8773 18.5484 13.7663 18.255 13.7701C17.9616 13.7738 17.6814 13.892 17.4739 14.0995C17.2665 14.3069 17.1482 14.5872 17.1445 14.8806C17.1407 15.1739 17.2517 15.4571 17.4538 15.6698L19.0443 17.2617ZM26.9994 14.625C27.2978 14.625 27.5839 14.5065 27.7949 14.2955C28.0059 14.0845 28.1244 13.7984 28.1244 13.5V11.25C28.1244 10.9516 28.0059 10.6655 27.7949 10.4545C27.5839 10.2435 27.2978 10.125 26.9994 10.125C26.7011 10.125 26.4149 10.2435 26.2039 10.4545C25.9929 10.6655 25.8744 10.9516 25.8744 11.25V13.5C25.8744 13.7984 25.9929 14.0845 26.2039 14.2955C26.4149 14.5065 26.7011 14.625 26.9994 14.625ZM34.1586 17.5908C34.3064 17.5909 34.4528 17.5619 34.5893 17.5054C34.7259 17.449 34.85 17.3662 34.9546 17.2617L36.545 15.6698C36.7471 15.4571 36.8581 15.1739 36.8544 14.8806C36.8506 14.5872 36.7324 14.3069 36.5249 14.0995C36.3175 13.892 36.0372 13.7738 35.7438 13.7701C35.4505 13.7663 35.1673 13.8773 34.9546 14.0794L33.3627 15.6698C33.2052 15.8272 33.0979 16.0277 33.0544 16.2461C33.0109 16.4644 33.0332 16.6907 33.1184 16.8964C33.2037 17.1021 33.348 17.2779 33.5332 17.4015C33.7183 17.5251 33.936 17.591 34.1586 17.5908ZM35.9994 23.625C35.9994 23.9234 36.1179 24.2095 36.3289 24.4205C36.5399 24.6315 36.8261 24.75 37.1244 24.75H39.3744C39.6728 24.75 39.9589 24.6315 40.1699 24.4205C40.3809 24.2095 40.4994 23.9234 40.4994 23.625C40.4994 23.3266 40.3809 23.0405 40.1699 22.8295C39.9589 22.6185 39.6728 22.5 39.3744 22.5H37.1244C36.8261 22.5 36.5399 22.6185 36.3289 22.8295C36.1179 23.0405 35.9994 23.3266 35.9994 23.625ZM21.3744 24.75C21.6728 24.75 21.9589 24.6315 22.1699 24.4205C22.3809 24.2095 22.4994 23.9234 22.4994 23.625C22.4994 22.4315 22.9735 21.2869 23.8174 20.443C24.6614 19.5991 25.8059 19.125 26.9994 19.125C28.1929 19.125 29.3375 19.5991 30.1814 20.443C31.0253 21.2869 31.4994 22.4315 31.4994 23.625C31.4994 23.9234 31.6179 24.2095 31.8289 24.4205C32.0399 24.6315 32.3261 24.75 32.6244 24.75C32.9228 24.75 33.2089 24.6315 33.4199 24.4205C33.6309 24.2095 33.7494 23.9234 33.7494 23.625C33.7494 21.8348 33.0383 20.1179 31.7724 18.852C30.5065 17.5862 28.7896 16.875 26.9994 16.875C25.2092 16.875 23.4923 17.5862 22.2265 18.852C20.9606 20.1179 20.2494 21.8348 20.2494 23.625C20.2494 23.9234 20.3679 24.2095 20.5789 24.4205C20.7899 24.6315 21.0761 24.75 21.3744 24.75ZM42.5961 39.9375C42.4976 40.1081 42.356 40.2499 42.1855 40.3486C42.0149 40.4474 41.8215 40.4996 41.6244 40.5H12.3744C12.1773 40.5009 11.9834 40.45 11.8122 40.3525C11.6409 40.2549 11.4983 40.114 11.3986 39.944C11.2989 39.774 11.2457 39.5807 11.2442 39.3836C11.2427 39.1865 11.293 38.9925 11.39 38.8209L17.1121 28.6959C17.2106 28.5219 17.3537 28.3772 17.5268 28.2768C17.6998 28.1765 17.8964 28.1241 18.0965 28.125H35.901C36.101 28.1241 36.2977 28.1765 36.4707 28.2768C36.6437 28.3772 36.7868 28.5219 36.8854 28.6959L42.6074 38.8209C42.7029 38.9919 42.752 39.1849 42.7501 39.3807C42.7481 39.5765 42.695 39.7685 42.5961 39.9375ZM35.2457 30.375H31.8186L32.308 32.625H36.5169L35.2457 30.375ZM30.006 32.625L29.5166 30.375H24.4822L23.9929 32.625H30.006ZM23.5035 34.875L22.7708 38.25H31.228L30.4954 34.875H23.5035ZM17.4819 32.625H21.6908L22.1802 30.375H18.7532L17.4819 32.625ZM14.3024 38.25H20.4674L21.2015 34.875H16.2107L14.3024 38.25ZM39.6965 38.25L37.7882 34.875H32.7974L33.5315 38.25H39.6965Z" fill="#166066"/> </svg> , }, { title: "Annual Maintenance", description: "Ensure peak performance and long life of your solar systems with our reliable annual maintenance service. keeping energy clean & efficient all year round.", image: "https://res.cloudinary.com/dimfwawfk/image/upload/v1761832613/3ad37aad8657e6ea87b89619fc106088517438b0_budfcq.jpg", icon: <svg width="53" height="53" viewBox="0 0 53 53" fill="none" xmlns="http://www.w3.org/2000/svg"> <circle cx="26.5" cy="26.5" r="26.5" fill="#8EC643"/> <g clipPath="url(#clip0_914_116)"> <path d="M37.125 40.5H16.875C16.5766 40.5 16.2905 40.3815 16.0795 40.1705C15.8685 39.9595 15.75 39.6734 15.75 39.375V14.625C15.75 14.3266 15.8685 14.0405 16.0795 13.8295C16.2905 13.6185 16.5766 13.5 16.875 13.5H30.375L38.25 21.375V39.375C38.25 39.6734 38.1315 39.9595 37.9205 40.1705C37.7095 40.3815 37.4234 40.5 37.125 40.5Z" stroke="#166066" strokeWidth="2.25" strokeLinecap="round" strokeLinejoin="round"/> <path d="M30.375 13.5V21.375H38.25" stroke="#166066" strokeWidth="2.25" strokeLinecap="round" strokeLinejoin="round"/> <circle cx="18" cy="36" r="8" fill="#8EC643"/> <path d="M23.1875 33.6875C23.1875 33.8118 23.1381 33.931 23.0502 34.019C22.9623 34.1069 22.8431 34.1563 22.7188 34.1563H20.835C20.8402 34.2336 20.8438 34.3115 20.8438 34.3906C20.8427 35.3227 20.4719 36.2163 19.8128 36.8753C19.1538 37.5344 18.2602 37.9052 17.3281 37.9063H16.4311L20.6902 41.7781C20.7366 41.8193 20.7744 41.8693 20.8014 41.9251C20.8283 41.981 20.8439 42.0417 20.8472 42.1036C20.8506 42.1655 20.8416 42.2275 20.8208 42.286C20.8 42.3444 20.7678 42.3981 20.7261 42.444C20.6843 42.4899 20.6339 42.5271 20.5777 42.5534C20.5215 42.5797 20.4607 42.5945 20.3987 42.5971C20.3368 42.5997 20.2749 42.59 20.2167 42.5685C20.1585 42.547 20.1052 42.5141 20.0598 42.4719L14.9035 37.7844C14.8335 37.7207 14.7844 37.6374 14.7626 37.5453C14.7409 37.4533 14.7475 37.3568 14.7816 37.2685C14.8157 37.1803 14.8757 37.1044 14.9537 37.0509C15.0317 36.9974 15.1241 36.9688 15.2188 36.9688H17.3281C18.0116 36.968 18.667 36.6961 19.1503 36.2128C19.6336 35.7295 19.9055 35.0741 19.9062 34.3906C19.9062 34.3115 19.9021 34.2336 19.8951 34.1563H15.2188C15.0944 34.1563 14.9752 34.1069 14.8873 34.019C14.7994 33.931 14.75 33.8118 14.75 33.6875C14.75 33.5632 14.7994 33.444 14.8873 33.356C14.9752 33.2681 15.0944 33.2188 15.2188 33.2188H19.6232C19.4073 32.7957 19.0788 32.4405 18.6738 32.1923C18.2688 31.9442 17.8031 31.8127 17.3281 31.8125H15.2188C15.0944 31.8125 14.9752 31.7631 14.8873 31.6752C14.7994 31.5873 14.75 31.4681 14.75 31.3438C14.75 31.2194 14.7994 31.1002 14.8873 31.0123C14.9752 30.9244 15.0944 30.875 15.2188 30.875H22.7188C22.8431 30.875 22.9623 30.9244 23.0502 31.0123C23.1381 31.1002 23.1875 31.2194 23.1875 31.3438C23.1875 31.4681 23.1381 31.5873 23.0502 31.6752C22.9623 31.7631 22.8431 31.8125 22.7188 31.8125H19.7152C20.1334 32.1994 20.4514 32.682 20.6422 33.2188H22.7188C22.8431 33.2188 22.9623 33.2681 23.0502 33.356C23.1381 33.444 23.1875 33.5632 23.1875 33.6875Z" fill="#166066"/> </g> <defs> <clipPath id="clip0_914_116"> <rect width="36" height="36" fill="white" transform="translate(9 9)"/> </clipPath> </defs> </svg> , }, ];

  useEffect(() => {
    const checkScreen = () => setIsMobile(window.innerWidth < 768);
    checkScreen();
    window.addEventListener("resize", checkScreen);
    return () => window.removeEventListener("resize", checkScreen);
  }, []);

  return (
    <>

        {isMobile && (
  <section className="relative min-h-[400px] mb-5 bg-white">
    <div className="relative h-60 w-full">
  <Image
    src="/HeroService.jpg"
    alt="Our Services"
    fill
    className="object-cover"
  />
  <div className="absolute inset-0 bg-black/40"></div>
  <h2 className="absolute inset-0 flex items-center justify-center text-white text-3xl font-semibold">
    WHAT DO WE SERVE?
  </h2>
</div>

    <div className="flex flex-col gap-4 px-4 mt-6">
      {services.map((service, index) => (
        <div key={index} className="bg-white rounded-lg shadow-lg">
          <button
            onClick={() => setOpenIndex(openIndex === index ? null : index)}
            className="w-full flex justify-between items-center p-4 font-bold text-lg"
          >
            <div className="flex items-center gap-3">
              {service.icon}
              {service.title}
            </div>
            <span>{openIndex === index ? "▲" : "▼"}</span>
          </button>
          {openIndex === index && (
            <div className="px-4 pb-4">
              <p className="text-gray-600 text-sm mt-2">
                {service.description}
              </p>
              <div className="relative h-40 w-full mt-4">
                <Image
                  src={service.image}
                  alt={service.title}
                  fill
                  className="object-cover rounded"
                />
              </div>
            </div>
          )}
        </div>
      ))}
    </div>
  </section>
)}

        {!isMobile && (
          <section className="relative bg-cover bg-center h-[400px] mb-80" 
          style={{ backgroundImage: "url('/HeroService.jpg')" }} >
             <div className="absolute inset-0 bg-black/40"></div>
              <div className="relative z-10 text-center py-16"> <h2 className="text-white text-3xl font-semibold mb-12"> WHAT DO WE SERVE? </h2> <div className="flex flex-col md:flex-row justify-center items-center gap-16 px-4 relative md:top-24"> {services.map((service, index) => ( <div key={index} className="bg-white rounded-lg overflow-hidden shadow-lg w-[300px]" > <div className="p-5 mt-5"> <h3 className="font-bold text-lg">{service.title}</h3> <p className="text-gray-600 text-sm mt-2"> {service.description} </p> <div className="absolute z-50 ml-55"> {service.icon} </div> </div> <div className="relative h-48 w-full"> <Image src={service.image} alt={service.title} fill className="object-cover" /> </div> </div> ))} </div> </div> </section>
        )}
                </>
  );
}
